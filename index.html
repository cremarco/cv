<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marco Cremaschi - Academic CV</title>
    <link href="./dist/output.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    
</head>
<body class="bg-gray-lightest flex flex-col items-center p-6 gap-6">
    <div id="pages-container" class="flex flex-col gap-6 items-center">
    <main class="a4-page pdf-page flex bg-white page-break">
        <aside class="w-[220px] bg-white p-6 flex flex-col">
            <div class="mb-4">
                <img src="img/photo-profile.png" alt="Profile photo" class="w-12 h-12 rounded-full mb-2 object-cover">
                <div class="font-outfit font-medium text-ink mb-1">
                    <span class="text-xs-16">Marco Cremaschi, </span>
                    <span class="text-xs leading-normal tracking-tight">PH.D</span>
                </div>
                <div class="bg-gradient-to-r from-[#a478e8] to-[#516cf7] bg-clip-text text-transparent text-xs-12 font-dm-sans font-medium">Research Assistant</div>
            </div>

            <div class="h-px bg-line mb-3"></div>
            <div class="mb-3 space-y-3">
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 rounded-full bg-line flex items-center justify-center flex-shrink-0">
                        <i class='bx bx-envelope text-[12px] text-gray-dark'></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="text-xs-6 text-muted mb-1 font-dm-sans leading-tight">Email</div>
                        <div class="text-xs-7 text-gray-dark font-dm-sans font-medium break-words leading-tight">marco.cremaschi@unimib.it</div>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 rounded-full bg-line flex items-center justify-center flex-shrink-0">
                        <i class='bx bx-link text-[12px] text-gray-dark'></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="text-xs-6 text-muted mb-1 font-dm-sans leading-tight">Website</div>
                        <a href="https://cremarco.bitbucket.io" class="text-xs-7 text-gray-dark font-dm-sans font-medium underline break-words leading-tight block">cremarco.bitbucket.org</a>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 rounded-full bg-line flex items-center justify-center flex-shrink-0">
                        <i class='bx bx-phone text-[12px] text-gray-dark'></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="text-xs-6 text-muted mb-1 font-dm-sans leading-tight">Phone</div>
                        <div class="text-xs-7 text-gray-dark font-dm-sans font-medium break-words leading-tight">(+39) 366 41 68 368</div>
                    </div>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-4 h-4 rounded-full bg-line flex items-center justify-center flex-shrink-0">
                        <i class='bx bx-map text-[12px] text-gray-dark'></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="text-xs-6 text-muted mb-1 font-dm-sans leading-tight">Address</div>
                        <div class="text-xs-7 text-gray-dark font-dm-sans font-medium break-words leading-tight">Milan, Italy</div>
                    </div>
                </div>
            </div>

            <div class="h-px bg-line mb-3"></div>

            <div class="mb-3">
                <div class="text-xs-6 text-muted mb-3 font-dm-sans">Socials</div>
                <div class="space-y-3">
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 rounded-full bg-linkedin flex items-center justify-center shadow-sm flex-shrink-0">
                            <i class='bx bxl-linkedin text-[12px] text-white'></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="text-xs-6 text-muted mb-1 font-dm-sans leading-tight">LinkedIn</div>
                            <a href="https://www.linkedin.com/in/marco-cremaschi/" class="text-xs-7 text-gray-dark font-dm-sans font-medium underline break-words leading-tight block">marco-cremaschi</a>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-4 h-4 rounded-full bg-github flex items-center justify-center shadow-sm flex-shrink-0">
                            <i class='bx bxl-github text-[12px] text-white'></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="text-xs-6 text-muted mb-1 font-dm-sans leading-tight">GitHub</div>
                            <a href="https://github.com/cremarco" class="text-xs-7 text-gray-dark font-dm-sans font-medium underline break-words leading-tight block">cremarco</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="h-px bg-line mb-3"></div>

            <div>
                <div class="text-xs-6 text-muted mb-3 font-dm-sans">Languages</div>
                <div class="space-y-3">
                    <div class="flex items-center gap-2">
                        <img class="w-5 h-4 object-cover rounded shadow-sm flex-shrink-0" src="https://flagcdn.com/w80/it.png" alt="Italian flag">
                        <div class="flex-1 min-w-0">
                            <div class="text-xs-7 text-gray-dark font-dm-sans font-medium mb-1 leading-tight">Italian</div>
                            <div class="text-xs-6 text-muted font-dm-sans break-words leading-tight">Native</div>
                        </div>
                    </div>
                    <div class="flex items-center gap-2">
                        <img class="w-5 h-4 object-cover rounded shadow-sm flex-shrink-0" src="https://flagcdn.com/w80/gb.png" alt="English flag">
                        <div class="flex-1 min-w-0">
                            <div class="text-xs-7 text-gray-dark font-dm-sans font-medium mb-1 leading-tight">English</div>
                            <div class="text-xs-6 text-muted font-dm-sans break-words leading-tight">Professional working</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-auto pt-3" data-pdf-hide>
                <div class="h-px bg-line mb-3"></div>
                <a id="download-pdf" href="/api/pdf" class="w-full inline-flex items-center justify-center gap-2 rounded-md border border-gray-200 bg-white px-3 py-2 text-xs-7 font-dm-sans font-medium text-gray-dark shadow-sm hover:bg-gray-100 cursor-pointer" aria-label="Download PDF">
                    <i class='bx bx-download text-[14px] text-gray-dark' id="download-icon"></i>
                    <span id="download-text">Download PDF</span>
                </a>
            </div>
        </aside>

        <section class="flex-1 flex flex-col bg-gray-50">
            <div class="flex gap-4 pt-8 pl-2 pr-6 pb-0">
                <div class="flex flex-col items-center w-4 shrink-0">
                    <div class="w-4 h-4 rounded-full bg-white shadow-lg flex items-center justify-center relative" data-pdf-no-shadow>
                        <div class="w-2 h-2 rounded-full bg-gray-dark"></div>
                    </div>
                    <div class="w-px bg-gray-300 flex-1 min-h-[100px]"></div>
                </div>
                <div class="flex-1 pb-4">
                    <h2 class="text-xs-12 font-outfit font-medium text-ink mb-4">Research</h2>
                    <div class="flex flex-col gap-1 mb-4">
                        <div class="bg-white border border-gray-200 rounded-t-md px-4 py-3 shadow">
                            <div class="text-xs-8 font-dm-sans font-medium text-ink mb-0.5">Research Profile</div>
                            <div class="pl-2 text-xs-7 font-dm-sans text-ink text-justify leading-normal">
                                <p class="mb-0">I am a PhD in Computer Science (University of Milan-Bicocca, 2020) and currently a researcher at the University of Milan-Bicocca (DISCo), working at the intersection of <strong>Semantic Web/Knowledge Graph technologies</strong> and <strong>AI/ML</strong>, with a specific focus on semantic table interpretation, data enrichment, and LLM-based systems for decision support.</p>
                                <p class="mb-0">My research spans end-to-end methods and tools for building high-quality semantic representations from heterogeneous data, and applying them to real-world domains including <strong>mental health</strong> and <strong>early risk detection</strong>, through <strong>clinical decision support</strong> and predictive modelling.</p>
                                <p class="mb-0">I have authored peer-reviewed publications in leading conferences and journals, with a solid research impact and international recognitions including ESWC Best Demo Award (2019) and ISWC Best Resource Award (2025).</p>
                                <p class="mb-0">I actively contribute to the research community through service and leadership roles (e.g., Chair of SemTab@ISWC, tutorial organisation, associate editor and PC/reviewer roles).</p>
                                <p class="mb-0">A key dimension of my profile is the <strong>continuous involvement in international research networks and projects</strong>: I hold responsibilities in COST Actions and I have contributed to EU-funded initiatives on open data exploitation and semantic enrichment.</p>
                                <p class="mb-0">I also gained <strong>international experience</strong> through research activity abroad at Bielefeld University (Semantic Computing Group) and through research contracts at Sofia University "St. Kliment Ohridski" focused on data enrichment for AI.</p>
                                <p>Alongside academia, I combine research with <strong>grant writing and R&D project management</strong> and with <strong>technology transfer</strong>, including the role of co-founder/CTO of a university spin-off.</p>
                            </div>
                        </div>
                        <div class="bg-white border border-gray-200 border-t-0 rounded-b-md px-4 py-3 shadow">
                            <div class="text-xs-8 font-dm-sans font-medium text-ink mb-0.5">Research Interest</div>
                            <div class="pl-2 text-xs-7 font-dm-sans text-ink leading-normal">Semantic Web, Knowledge Graphs, Semantic Table Interpretation, Mental Health, Clinical Decision Support Systems, Disease Risk Prediction Models, Early Disease Detection Systems</div>
                        </div>
                    </div>
                    <div class="flex gap-1 mb-4">
                        <div class="flex-1 bg-white border border-gray-200 rounded-md px-4 py-3 shadow">
                            <div class="flex gap-2 items-center justify-center mb-1">
                                <div class="text-center">
                                    <div class="bg-gradient-to-r from-[#a478e8] to-[#516cf7] bg-clip-text text-transparent text-xs-16 font-dm-sans font-medium mb-0.5">475</div>
                                    <div class="text-xs-5 text-muted font-dm-sans">citations</div>
                                </div>
                                <div class="w-px h-6 bg-gray-200"></div>
                                <div class="text-center">
                                    <div class="bg-gradient-to-r from-[#a478e8] to-[#516cf7] bg-clip-text text-transparent text-xs-16 font-dm-sans font-medium mb-0.5">13</div>
                                    <div class="text-xs-5 text-muted font-dm-sans">h-index</div>
                                </div>
                                <div class="w-px h-6 bg-gray-200"></div>
                                <div class="text-center">
                                    <div class="bg-gradient-to-r from-[#a478e8] to-[#516cf7] bg-clip-text text-transparent text-xs-16 font-dm-sans font-medium mb-0.5">17</div>
                                    <div class="text-xs-5 text-muted font-dm-sans">i10-index</div>
                                </div>
                            </div>
                        </div>
                        <div class="flex-1 bg-white border border-gray-200 rounded-md px-4 py-3 shadow">
                            <div class="flex items-center justify-center mb-1">
                                <div class="text-center">
                                    <div class="bg-gradient-to-r from-[#a478e8] to-[#516cf7] bg-clip-text text-transparent text-xs-16 font-dm-sans font-medium mb-0.5">9</div>
                                    <div class="text-xs-5 text-muted font-dm-sans">citations</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex gap-4 pl-2 pr-6 py-0 flex-1">
                <div class="flex flex-col items-center w-4 shrink-0">
                    <div class="w-4 h-4 rounded-full bg-white shadow-lg flex items-center justify-center relative" data-pdf-no-shadow>
                        <div class="w-2 h-2 rounded-full bg-gray-dark"></div>
                    </div>
                    <div class="w-px bg-gray-300 flex-1"></div>
                </div>
                <div class="flex-1 flex flex-col gap-4">
                    <h2 class="text-xs-12 font-outfit font-medium text-ink">Academic experiences</h2>
                    <div id="academic-experiences" class="flex flex-col gap-1">
                        <!-- Cards will be generated here dynamically -->
                    </div>
                    <div class="flex justify-end pb-2 mt-auto">
                        <div class="text-xs-6 text-gray-dark font-dm-sans font-bold">1</div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    </div>

    <script>
        (function initPdfMode() {
            const isPrintPath = window.location.pathname === '/print' || window.location.pathname === '/print/';
            const urlParams = new URLSearchParams(window.location.search);
            const isPdfMode = isPrintPath || urlParams.get('pdf') === '1' || urlParams.get('pdf') === 'true';

            // Expose readiness state for server-side PDF generation.
            window.__PDF_READY__ = false;
            window.__PDF_PAGE_COUNT__ = 0;
            window.__PDF_ERROR__ = null;

            if (isPdfMode) {
                document.body.classList.add('pdf-mode');
            }
        })();

        function createNewPage(pageNumber) {
            const pagesContainer = document.getElementById('pages-container');
            const firstPage = document.querySelector('.a4-page');

            const newPage = firstPage.cloneNode(true);
            newPage.id = `page-${pageNumber}`;
            newPage.classList.add('pdf-page');

            // Remove the aside (sidebar) from new pages - only first page should have it
            const aside = newPage.querySelector('aside');
            if (aside) {
                aside.remove();
            }

            // Clear the academic experiences section in the new page
            const newSection = newPage.querySelector('#academic-experiences');
            if (newSection) {
                newSection.innerHTML = '';
            }

            // Update page number
            const pageNumberEl = newPage.querySelector('.flex.justify-end.pb-2.mt-auto .text-xs-6');
            if (pageNumberEl) {
                pageNumberEl.textContent = pageNumber;
            }

            // Remove the Research section from new pages (keep only Academic experiences)
            const researchSection = newPage.querySelector('.flex.gap-4.pt-8.pl-2.pr-6.pb-0');
            if (researchSection) {
                researchSection.remove();
            }

            // Add pt-8 to Academic experiences section to match first page spacing
            const academicSection = newPage.querySelector('.flex.gap-4.pl-2.pr-6.py-0.flex-1');
            if (academicSection) {
                academicSection.classList.remove('py-0');
                academicSection.classList.add('pt-8', 'pb-0');
            }

            // Update the timeline to start from top
            const timelineContainer = newPage.querySelector('.flex.flex-col.items-center.w-4.shrink-0');
            if (timelineContainer) {
                const line = timelineContainer.querySelector('.w-px.bg-gray-300');
                if (line) {
                    line.classList.add('flex-1');
                }
            }

            pagesContainer.appendChild(newPage);
            return newPage;
        }

        function buildExperienceCard(exp, index, total) {
            const isFirst = index === 0;
            const isLast = index === total - 1;
            const isCurrent = exp.current === true;

            let cardClasses = 'px-4 py-3 flex gap-3 shadow';
            if (isFirst && isCurrent) {
                cardClasses += ' bg-accent-lightest border border-accent-soft border-b-0 rounded-t-md';
            } else if (isFirst && !isCurrent) {
                cardClasses += ' bg-white border border-gray-200 border-b-0 rounded-t-md';
            } else if (isLast) {
                cardClasses += ' bg-white border border-gray-200 border-t-0 rounded-b-md';
            } else {
                cardClasses += ' bg-white border border-gray-200 border-t-0';
            }

            const timeBadgeClasses = isCurrent
                ? 'inline-flex items-center px-1.5 py-0.5 text-[9px] font-medium bg-purple-100 text-purple-700 rounded-md'
                : 'inline-flex items-center px-1.5 py-0.5 text-[9px] font-medium bg-gray-100 text-gray-700 rounded-md';

            let topicText = exp.topic || '';
            if (exp.ssd) {
                topicText += topicText ? `, SSD ${exp.ssd}` : `SSD ${exp.ssd}`;
            }

            return `
                <div class="${cardClasses}">
                    <img src="img/logo/${exp.logo}" alt="${exp.university} logo" class="w-5 h-5 object-contain flex-shrink-0 rounded">
                    <div class="flex-1">
                        <div class="flex justify-between items-start mb-1">
                            <div class="${isCurrent ? 'w-[100px]' : 'w-[178px]'}">
                                <div class="text-xs-7 text-muted font-dm-sans mb-0.5 whitespace-nowrap">${exp.university}</div>
                                <div class="text-xs-8 text-ink font-dm-sans font-medium">${exp.position}</div>
                            </div>
                            <div class="flex flex-col gap-0.5 items-end">
                                <div class="flex gap-2">
                                    ${exp.link ? `<a href="${exp.link}" class="inline-flex items-center justify-center px-1.5 py-0.5 text-[9px] font-medium bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300" aria-label="Link"><i class='bx bx-link-external text-[10px]'></i></a>` : ''}
                                    <span class="${timeBadgeClasses}">${exp.time_period}</span>
                                </div>
                                <div class="flex items-center gap-1">
                                    <i class='bx bx-map text-[8px] text-muted'></i>
                                    <div class="text-xs-5 text-muted font-dm-sans">${exp.place}</div>
                                </div>
                            </div>
                        </div>
                        <div class="pl-1.5 text-xs-7 text-ink font-dm-sans leading-normal">
                            ${topicText ? `<p class="mb-0">${topicText}.</p>` : ''}
                            ${exp.department ? `<p class="text-xs-6 text-muted italic mt-1">${exp.department}.</p>` : ''}
                        </div>
                    </div>
                </div>
            `;
        }

        async function loadAcademicExperiences() {
            try {
                const response = await fetch('./data.json');
                const data = await response.json();

                if (!data.academic_experiences) {
                    return;
                }

                const experiences = data.academic_experiences;
                let currentContainer = document.getElementById('academic-experiences');

                if (!currentContainer) {
                    return;
                }

                // Clear initial container
                currentContainer.innerHTML = '';

                // Render all cards to measure them.
                const tempContainer = document.createElement('div');
                tempContainer.style.position = 'absolute';
                tempContainer.style.visibility = 'hidden';
                tempContainer.className = 'flex flex-col gap-1';
                document.body.appendChild(tempContainer);

                experiences.forEach((exp, index) => {
                    tempContainer.insertAdjacentHTML(
                        'beforeend',
                        buildExperienceCard(exp, index, experiences.length)
                    );
                });

                // Wait for images to load, then measure.
                await new Promise(resolve => setTimeout(resolve, 100));

                const cards = Array.from(tempContainer.children);
                document.body.removeChild(tempContainer);

                let currentPageNumber = 1;
                let currentPageHeight = 0;
                const maxPageHeight = 180 * 3.779527559; // ~180mm in pixels (space for experiences section)
                let isFirstInPage = true;

                cards.forEach((card, index) => {
                    const cardHeight = card.offsetHeight || 150; // fallback height
                    const isLast = index === cards.length - 1;
                    const exp = experiences[index];
                    const isCurrent = exp.current === true;

                    // Check if we need a new page.
                    if (currentPageHeight > 0 && (currentPageHeight + cardHeight) > maxPageHeight) {
                        // Close current page.
                        const lastCard = currentContainer.lastElementChild;
                        if (lastCard) {
                            lastCard.classList.remove('border-t-0');
                            lastCard.classList.add('rounded-b-md');
                        }

                        currentPageNumber += 1;
                        const newPage = createNewPage(currentPageNumber);
                        currentContainer = newPage.querySelector('#academic-experiences');
                        currentPageHeight = 0;
                        isFirstInPage = true;
                    }

                    let cardClasses = 'px-4 py-3 flex gap-3 shadow';
                    if (isFirstInPage && isCurrent) {
                        cardClasses = 'px-4 py-3 flex gap-3 shadow bg-accent-lightest border border-accent-soft border-b-0 rounded-t-md';
                    } else if (isFirstInPage && !isCurrent) {
                        cardClasses = 'px-4 py-3 flex gap-3 shadow bg-white border border-gray-200 border-b-0 rounded-t-md';
                    } else if (isLast && currentPageHeight === 0) {
                        cardClasses = 'px-4 py-3 flex gap-3 shadow bg-white border border-gray-200 border-t-0 rounded-b-md';
                    } else {
                        cardClasses = 'px-4 py-3 flex gap-3 shadow bg-white border border-gray-200 border-t-0';
                    }

                    const clonedCard = card.cloneNode(true);
                    clonedCard.className = cardClasses;
                    currentContainer.appendChild(clonedCard);

                    currentPageHeight += cardHeight;
                    isFirstInPage = false;
                });

                // Close last page.
                if (currentContainer) {
                    const lastCard = currentContainer.lastElementChild;
                    if (lastCard) {
                        lastCard.classList.remove('border-t-0');
                        lastCard.classList.add('rounded-b-md');
                    }
                }
            } catch (error) {
                console.error('Error loading academic experiences:', error);
                window.__PDF_ERROR__ = 'Error loading academic experiences';
            } finally {
                window.__PDF_PAGE_COUNT__ = document.querySelectorAll('.pdf-page').length;
                window.__PDF_READY__ = true;
            }
        }

        function bootstrap() {
            loadAcademicExperiences();
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', bootstrap);
        } else {
            bootstrap();
        }
    </script>
</body>
</html>
